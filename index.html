<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Fractal Universe</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
        }

        canvas {
            width: 100%;
            height: 100%;
            position: absolute;
        }
    </style>
</head>
<body>
    <canvas id="universe"></canvas>

    <script>
        const canvas = document.getElementById('universe');
        const ctx = canvas.getContext('2d');

        const maxIterations = 100;
        const zoomFactor = 200;
        let offsetX = -canvas.width / 2;
        let offsetY = -canvas.height / 2;

        function mandelbrot(c) {
            let z = c;
            for (let i = 0; i < maxIterations; i++) {
                z = z.mul(z).add(c);
                if (z.abs() > 2) {
                    return i;
                }
            }
            return maxIterations;
        }

        function drawMandelbrot() {
            for (let x = 0; x < canvas.width; x++) {
                for (let y = 0; y < canvas.height; y++) {
                    const real = (x + offsetX) / zoomFactor;
                    const imaginary = (y + offsetY) / zoomFactor;
                    const c = new Complex(real, imaginary);
                    const value = mandelbrot(c);
                    const brightness = (value / maxIterations) * 255;
                    ctx.fillStyle = `rgb(${brightness}, ${brightness}, ${brightness})`;
                    ctx.fillRect(x, y, 1, 1);
                }
            }
        }

        function zoomIn(e) {
            const zoomAmount = 1.2;
            const x = e.clientX - canvas.getBoundingClientRect().left;
            const y = e.clientY - canvas.getBoundingClientRect().top;

            offsetX -= (x - canvas.width / 2) / zoomFactor;
            offsetY -= (y - canvas.height / 2) / zoomFactor;
            zoomFactor *= zoomAmount;

            drawMandelbrot();
        }

        canvas.addEventListener('mousedown', (e) => {
            canvas.addEventListener('mousemove', zoomIn);
        });

        canvas.addEventListener('mouseup', () => {
            canvas.removeEventListener('mousemove', zoomIn);
        });

        class Complex {
            constructor(real, imaginary) {
                this.real = real;
                this.imaginary = imaginary;
            }

            add(other) {
                return new Complex(this.real + other.real, this.imaginary + other.imaginary);
            }

            mul(other) {
                return new Complex(
                    this.real * other.real - this.imaginary * other.imaginary,
                    this.real * other.imaginary + this.imaginary * other.real
                );
            }

            abs() {
                return Math.sqrt(this.real * this.real + this.imaginary * this.imaginary);
            }
        }

        drawMandelbrot();
    </script>
</body>
</html>
